# ContinuousPathEnum
Source code of "Hop-constrained s-t Path Enumeration on Large Dynamic Graphs", submitted to ICDE 2022

Please download the code in https://drive.google.com/drive/folders/1iwZtCkZDC-Sd0Uo42g7SQLKCmnyURXyS?usp=sharing


## Compile

Under the root directory of the project, execute the "compile.sh" file.



## Running the experiments

After compiling the source code, you can find the binary file 'CPE.exe' under the root directory. 

### exp-1 Startup Query

Running the "exp-1.sh" to test our $CPE_{startup}$ algorithm on $BS$ over 1,000 random selected query pairs.

In the section V-B of our paper, we report results by default.



### exp-2 Update Query

Running the "exp-2.sh" to test our $CPE_{update}$ and $CPE_{startup}$ algorithm on $BS$ over 10 query pairs and 100 edge updates. (All query pairs are randomly selected from vertices within the top 10% in the descending order of degree)



By default, we report the running time against edge insertion. Please refer to comments in "exp-2.sh" to change the parameter to query against edge deletion.



### exp-3 Update Query on Hot Query Pairs with $k$ varied.

Running the "exp-3.sh" to test our $CPE_{update}$ and $CPE_{startup}$ algorithm on $BS$ over 10 query pairs and 100 edge updates. (All query pairs are randomly selected from vertices within the top 1% in the descending order of degree)



By default, we report the running time against edge insertion. Please refer to comments in "exp-3.sh" to change the parameter to query against edge deletion with different $k$.



## Input Format

Our algorithms work on directed and unlabeled graphs. In the graph file and the edge update file, each line is a directed edge, which consists of the source vertex ID and the destination vertex ID and they are separated by a a blank space.

Example:

```
0 1
0 2
1 2
```

Also, in the query pairs file, each line is a s-t pair and the s and t are separated by a a blank space. 

In addition, all the query pairs in our experiments are generated by [PathEnum](https://github.com/Xtra-Computing/PathEnum).

And all edge updates are generated by "gen_edge_expiration" and "gen_edge_update" function in our code.

## Output

We enumerate results without listing them explicitly. The metrics are listed as follows.

| Keyword                    | Description                                                  |
| -------------------------- | ------------------------------------------------------------ |
| average total time         | the running time of $CPE_{startup}$ on each query            |
| average preprocessing time | the elapsed time for preprocessing                           |
| average build time         | the elapsed time on index construction                       |
| average count time         | the elapsed time for enumerating paths on the index          |
| average path instants      | the number of k-st paths reported                            |
| average u time             | the average time for updating the result against each edge update on each query |
| average q time             | the average time for re-querying the result against each edge update on each query |
| avg_delta                  | the number of new/deleted paths reported                     |
| update latency             | the 99.9% latency of $CPE_{update}$                          |
| requery latency            | the 99.9% latency of $CPE_{startup}$                         |



## Datasets

We provide 2 datasets $EP$, $BS$ for testing our algorithms.

You can download the real-world datasets used in our paper from [SNAP](http://snap.stanford.edu/data/),  [Konect](http://konect.uni-koblenz.de/networks/) and [Network Repository](http://networkrepository.com/networks.php).

